(()=>{var a={};a.id=636,a.ids=[636],a.modules={331:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{Ay:()=>o,PE:()=>m,QM:()=>j,RO:()=>n,Uq:()=>k,Ww:()=>l});var e=c(9198),f=c(1428),g=a([e,f]);[e,f]=g.then?(await g)():g;let h="http://localhost:5000",i=a=>f.default.create({baseURL:h,headers:{Authorization:`Bearer ${a}`}}),j=(0,e.createAsyncThunk)("files/upload",async({file:a},{rejectWithValue:b})=>{try{let b=sessionStorage.getItem("token"),c=new FormData;c.append("file",a);let d=i(b);return(await d.post("/upload",c)).data}catch(a){return b(a.response?.data||"Upload failed")}}),k=(0,e.createAsyncThunk)("files/fetchAll",async(a,{rejectWithValue:b})=>{try{let a=sessionStorage.getItem("token"),b=i(a);return(await b.get("/files")).data}catch(a){return b(a.response?.data||"Failed to fetch files")}}),l=(0,e.createAsyncThunk)("files/delete",async(a,{rejectWithValue:b})=>{try{let b=sessionStorage.getItem("token"),c=i(b);return await c.delete(`/files/${a}`),a}catch(a){return b(a.response?.data||"Delete failed")}}),m=(0,e.createAsyncThunk)("files/download",async(a,{rejectWithValue:b})=>{try{let b=sessionStorage.getItem("token"),c=await fetch(`${h}/files/${a}/download`,{headers:{Authorization:`Bearer ${b}`,Accept:"*/*"}}),d=c.headers.get("content-type"),e=c.headers.get("content-disposition"),f=`file-${a}`;if(e){let a=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(e);null!=a&&a[1]&&(f=a[1].replace(/['"]/g,""))}let g=await c.blob(),i=new Blob([g],{type:d||"application/octet-stream"}),j=window.URL.createObjectURL(i),k=document.createElement("a");return k.style.display="none",k.href=j,k.download=decodeURIComponent(f),document.body.appendChild(k),k.click(),setTimeout(()=>{document.body.removeChild(k),window.URL.revokeObjectURL(j)},100),{fileId:a,fileName:f}}catch(a){return b({message:a.message||"Download failed"})}}),n=(0,e.createAsyncThunk)("files/preview",async(a,{rejectWithValue:b})=>{try{let b=sessionStorage.getItem("token"),c=i(b),d=await c.get(`/files/${a}/preview`);if(d.data&&d.data.previewUrl)return window.open(d.data.previewUrl,"_blank"),d.data;throw Error("Preview URL not found")}catch(a){return b(a.response?.data?.message||"Preview failed")}}),o=(0,e.createSlice)({name:"files",initialState:{files:[],loadingAll:!1,uploading:!1,deleting:!1,error:null},reducers:{},extraReducers:a=>{a.addCase(k.pending,a=>{a.loadingAll=!0}).addCase(k.fulfilled,(a,b)=>{a.loadingAll=!1,a.files=b.payload}).addCase(k.rejected,(a,b)=>{a.loadingAll=!1,a.error=b.payload}).addCase(j.pending,a=>{a.uploading=!0}).addCase(j.fulfilled,(a,b)=>{a.uploading=!1,a.files.unshift(b.payload)}).addCase(j.rejected,(a,b)=>{a.uploading=!1,a.error=b.payload}).addCase(l.pending,(a,b)=>{a.deleting=!0,a.files=a.files.filter(a=>a._id!==b.meta.arg)}).addCase(l.fulfilled,a=>{a.deleting=!1}).addCase(l.rejected,(a,b)=>{a.deleting=!1,a.error=b.payload}).addCase(m.pending,a=>{}).addCase(m.fulfilled,a=>{}).addCase(m.rejected,(a,b)=>{a.error=b.payload})}}).reducer;d()}catch(a){d(a)}})},979:()=>{},1415:a=>{"use strict";a.exports=import("sonner")},1428:a=>{"use strict";a.exports=import("axios")},4062:a=>{"use strict";a.exports=import("react-redux")},5487:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{Ay:()=>k,iD:()=>j,kz:()=>i});var e=c(9198),f=c(1428),g=a([e,f]);[e,f]=g.then?(await g)():g;let h="http://localhost:5000",i=(0,e.createAsyncThunk)("auth/register",async({name:a,email:b,password:c},{rejectWithValue:d})=>{try{let d=await f.default.post(`${h}/auth/register`,{name:a,email:b,password:c});return sessionStorage.setItem("token",d.data.token),d.data}catch(a){return d(a.response.data)}}),j=(0,e.createAsyncThunk)("auth/login",async({email:a,password:b},{rejectWithValue:c})=>{try{let c=await f.default.post(`${h}/auth/login`,{email:a,password:b});return sessionStorage.setItem("token",c.data.token),c.data}catch(a){return c(a.response.data)}}),k=(0,e.createSlice)({name:"auth",initialState:{user:null,token:null,loading:!1,error:null},reducers:{logout:a=>{a.user=null,a.token=null},clearError:a=>{a.error=null}},extraReducers:a=>{a.addCase(i.pending,a=>{a.loading=!0}).addCase(i.fulfilled,(a,b)=>{a.loading=!1,a.user=b.payload.user,a.token=b.payload.token}).addCase(i.rejected,(a,b)=>{a.loading=!1,a.error=b.payload}).addCase(j.pending,a=>{a.loading=!0}).addCase(j.fulfilled,(a,b)=>{a.loading=!1,a.user=b.payload.user,a.token=b.payload.token}).addCase(j.rejected,(a,b)=>{a.loading=!1,a.error=b.payload})}}).reducer;d()}catch(a){d(a)}})},5546:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>j});var e=c(8732),f=c(4062),g=c(6834),h=c(1415);c(979);var i=a([f,g,h]);function j({Component:a,pageProps:b}){return(0,e.jsxs)(f.Provider,{store:g.M,children:[(0,e.jsx)(a,{...b}),(0,e.jsx)(h.Toaster,{position:"top-right"})]})}[f,g,h]=i.then?(await i)():i,d()}catch(a){d(a)}})},6834:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{M:()=>i});var e=c(9198),f=c(5487),g=c(331),h=a([e,f,g]);[e,f,g]=h.then?(await h)():h;let i=(0,e.configureStore)({reducer:{auth:f.Ay,files:g.Ay}});d()}catch(a){d(a)}})},8732:a=>{"use strict";a.exports=require("react/jsx-runtime")},9198:a=>{"use strict";a.exports=import("@reduxjs/toolkit")}};var b=require("../webpack-runtime.js");b.C(a);var c=b(b.s=5546);module.exports=c})();