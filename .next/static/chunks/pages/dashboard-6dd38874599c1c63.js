(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{420:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var s=a(7876);a(4232);var r=a(2987),i=a(7137),n=a(3243);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:a,size:i,asChild:d=!1,...c}=e,o=d?r.DX:"button";return(0,s.jsx)(o,{"data-slot":"button",className:(0,n.cn)(l({variant:a,size:i,className:t})),...c})}},3243:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i,z:()=>n});var s=a(9241),r=a(9573);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(t<0?0:t))+" "+["Bytes","KB","MB","GB","TB"][a]}},5372:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(5516)}])},5516:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(7876),r=a(144),i=a(7963);let n=(0,i.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),l=(0,i.A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),d=(0,i.A)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),c=(0,i.A)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),o=(0,i.A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),h=(0,i.A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),u=(0,i.A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var p=a(420),x=a(8666),g=a(4232),m=a(9099),f=a(1777),v=a(4236),y=a(9688),b=a(3243);let j=()=>{let[e,t]=(0,g.useState)("grid"),[a,i]=(0,g.useState)(!1),j=(0,m.useRouter)(),w=(0,f.wA)(),{files:k,loadingAll:N,uploading:M,deleting:F}=(0,f.d4)(e=>e.files);(0,g.useEffect)(()=>{if(!sessionStorage.getItem("token"))return void j.push("/signin");w((0,v.Uq)()).unwrap().catch(e=>{y.oR.error("Failed to fetch files"),401===e.status&&(sessionStorage.removeItem("token"),j.push("/signin"))})},[w,j]);let _=new Set(["text/plain","image/jpeg","image/png","application/pdf","application/json"]),z=new Set([".txt",".jpg",".jpeg",".png",".pdf",".json"]),C=e=>{let t=e.name.slice((e.name.lastIndexOf(".")-1>>>0)+2).toLowerCase();return _.has(e.type)&&z.has(".".concat(t))},R=async e=>{if(e)for(let t of e){if(!C(t)){y.oR.error("".concat(t.name," is not a supported file type."));continue}try{await w((0,v.QM)({file:t})).unwrap(),y.oR.success("".concat(t.name," uploaded successfully!"))}catch(e){y.oR.error("Failed to upload ".concat(t.name))}}},B=e=>{e.preventDefault(),e.stopPropagation(),i("dragenter"===e.type||"dragover"===e.type)},D=async e=>{var t;e.preventDefault(),e.stopPropagation(),i(!1),await R(null==(t=e.dataTransfer)?void 0:t.files)},A=async e=>{await R(e.target.files)},H=async e=>{try{await w((0,v.PE)(e)).unwrap(),y.oR.success("File downloaded successfully")}catch(e){y.oR.error(e.message||"Failed to download file")}},S=async e=>{try{await w((0,v.Ww)(e)).unwrap(),y.oR.success("File deleted successfully")}catch(e){y.oR.error("Failed to delete file")}},E=async e=>{try{await w((0,v.RO)(e)).unwrap(),console.log("Preview dispatched"),y.oR.success("File previewed successfully")}catch(e){y.oR.error(e.message||"Failed to preview file")}};return(0,s.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,s.jsx)("header",{className:"border-b bg-white",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-[#0B6CFF] rounded-xl flex items-center justify-center",children:(0,s.jsx)(r.A,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("span",{className:"text-xl font-bold text-[#0B6CFF]",children:"ClouDocs"})]}),(0,s.jsxs)(p.$,{variant:"ghost",size:"sm",className:"text-gray-500",onClick:()=>{sessionStorage.removeItem("token"),j.push("/signin")},children:[(0,s.jsx)(n,{className:"w-4 h-4 mr-2"})," Sign Out"]})]})}),(0,s.jsx)("main",{className:"max-w-7xl mx-auto px-4 py-8 bg-white",children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Files"}),(0,s.jsx)("p",{className:"text-gray-500 mt-1",children:"Upload and manage your files securely"}),M&&(0,s.jsx)("p",{className:"text-sm text-blue-500 mt-2",children:"Uploading..."}),F&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-2",children:"Deleting file..."})]}),(0,s.jsxs)("div",{className:"border-2 border-dashed ".concat(a?"border-[#0B6CFF] bg-blue-50":"border-gray-200"," rounded-lg p-12"),onDragEnter:B,onDragLeave:B,onDragOver:B,onDrop:D,children:[(0,s.jsx)("input",{type:"file",id:"file-upload",className:"hidden",multiple:!0,onChange:A}),(0,s.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer text-center block",children:[(0,s.jsx)(l,{className:"h-12 w-12 mx-auto text-gray-400"}),(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Drag & drop files here"}),(0,s.jsx)("p",{className:"text-gray-500 mt-1",children:"or click to browse"})]})]}),N?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading files..."}):0===k.length?(0,s.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No files yet. Upload your first file above!"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-black",children:[k.length," ",1===k.length?"file":"files"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(p.$,{variant:"ghost",size:"sm",className:"text-gray-400 ".concat("grid"===e?"bg-gray-800 text-gray-50":""),onClick:()=>t("grid"),children:(0,s.jsx)(d,{className:"w-4 h-4"})}),(0,s.jsx)(p.$,{variant:"ghost",size:"sm",className:"text-gray-400 ".concat("list"===e?"bg-gray-800 text-gray-50":""),onClick:()=>t("list"),children:(0,s.jsx)(c,{className:"w-4 h-4"})})]})]}),(0,s.jsx)("div",{className:"grid"===e?"grid grid-cols-3 gap-4":"space-y-4",children:k.map(t=>(0,s.jsx)(x.Zp,{className:"bg-white",children:(0,s.jsxs)(x.Wu,{className:"p-4 ".concat("list"===e?"flex items-center justify-between":""),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:(0,s.jsx)(o,{className:"w-6 h-6 text-[#0B6CFF]"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium truncate",onClick:()=>E(t._id),children:t.fileName}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,b.z)(t.size)," â€¢"," ",new Date(t.createdAt).toLocaleDateString()]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsx)(p.$,{variant:"ghost",size:"sm",onClick:()=>H(t._id),children:(0,s.jsx)(h,{className:"w-4 h-4"})}),(0,s.jsx)(p.$,{variant:"ghost",size:"sm",onClick:()=>S(t._id),className:"text-red-500 hover:text-red-700",children:(0,s.jsx)(u,{className:"w-4 h-4"})})]})]})},t._id))})]})]})})]})}},8666:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>n});var s=a(7876);a(4232);var r=a(3243);function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...a})}},9099:(e,t,a)=>{e.exports=a(6296)}},e=>{e.O(0,[740,636,593,792],()=>e(e.s=5372)),_N_E=e.O()}]);